<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"/>
    <style>
       #map {
        height: 98vh;
        float: left;
       }
       body{
           margin-left:0%;
           margin-right:0%;
           margin-top:0%;
           margin-right:0%;
       }
       .navbar{
            background-color:aqua;
            float: left;
            height: 98vh;
       }
       #desc{
           float:left;
       }
       #bar{
            float:left;
            background-color:brown;
       }
       #value{
            float:left;
       }
       .description{
           list-style-type: none;
       }
       #dataBox{
            background-color:rgba(236, 236, 236, 0.979);
            box-shadow: 3px 3px 3px #888888;
            padding:10px;
            padding-right:50px;
            display:inline-block;
            float: left;
            height:110vh;
       }
       #descriptionBox{
            border-style:groove;
            width:180px;
            float:left;
       }
       .description{
            padding-left:5px;
       }
        #barCharts{
           float:left;
           width:150px;
       }
       #graphDiv{
            display:inline-block;
            min-width:340px;
       }
       .fig{
            float:left;
       }
       .bar{
            width:100px;
            float:left;
            font: 10px sans-serif;
            background-color: steelblue;
            padding: 3px;
            margin: 1px;
            color: white;
       }

       #title{
           font-size:medium;
           margin-bottom:3px;
           margin-top:3px;
       }
       barcharts.li{
           list-style:none;
       }
       #Actions{
           border-style:groove;
           overflow:auto;
           width:auto;
       }
       .popover{
           max-width:225px;
       }
    </style>
  </head>
  <body>

    <div id='dataBox'>
        <div id='title'><b>Review Summary</b>
        </div>
        <div id='graphDiv'>
            <div id='descriptionBox'>
                <div class = 'description'  id='waterIssues'>
                    <li><b>Water Issues</b></li>
                    <li >Abnormal Colour<i data-toggle="popover" data-trigger="hover" data-content="
                    When “Yellow”, “Green”, “Red-brown”, “Black”
                    or “Other” is chosen" style="float:right; padding-right:5px;" class="glyphicon glyphicon-question-sign"></i></li>
                    <li >Turbid<i data-toggle="popover" data-trigger="hover" data-content="
                    When turbidity > 3" style="float:right; padding-right:5px;" class="glyphicon glyphicon-question-sign"></i></li>
                    <li >Abnormal Odor<i data-toggle="popover" data-trigger="hover" data-content="
                    When “Aware smell” or “Strong smell” is chosen" style="float:right; padding-right:5px;" class="glyphicon glyphicon-question-sign"></i></li>
                    <li >Floating Objects<i data-toggle="popover" data-trigger="hover" data-content="
                    When “Yes” is chosen in the corresponding
                    question" style="float:right; padding-right:5px;" class="glyphicon glyphicon-question-sign"></i></li>
                </div>
                <div>&emsp;</div>
                <div class = 'description'  id='airIssues'>
                    <li><b>Air Issues</b></li>
                    <li >Abnormal Color<i data-toggle="popover" data-trigger="hover" data-content="
                    When “Yellow”, “Green”, “Red-brown”, “Black”,
                    “White” or “Other” is chosen" style="float:right; padding-right:5px;" class="glyphicon glyphicon-question-sign"></i></li>
                    <li >Low Visibility<i data-toggle="popover" data-trigger="hover" data-content="
                    When “< 0.5 km” is chosen" style="float:right; padding-right:5px;" class="glyphicon glyphicon-question-sign"></i></li>                    
                    <li >Abnormal Odor<i data-toggle="popover" data-trigger="hover" data-content="
                    When “Aware smell” or “Strong smell” is chosen" style="float:right; padding-right:5px;" class="glyphicon glyphicon-question-sign"></i></li>
                    <li >Uncomfortable Feeling<i data-toggle="popover" data-trigger="hover" data-content="
                    When “Yes” is chosen in the corresponding
                    question" style="float:right; padding-right:5px;" class="glyphicon glyphicon-question-sign"></i></li>
                </div>
                <div>&emsp;</div>
                <div class = 'description' id='solidWasteIssues'>
                    <li><b>Solid Waste Issues</b></li>
                    <li >Abnormal Odor<i data-toggle="popover" data-trigger="hover" data-content="
                    When “Aware smell” or “Strong smell” is chosen" style="float:right; padding-right:5px;" class="glyphicon glyphicon-question-sign"></i></li>
                </div>
            </div>
            <div id='barCharts'>
                <div style="margin-top:25px;" id='waterIssuesBars'>
                    <div style = "clear:left;"><div class="bar" id='abColBar'>&emsp;</div><div class = 'fig' id = 'fig1' >1</div></div>
                    <div style = "clear:left;"><div class="bar" id='turbidBar'>&emsp;</div><div class = 'fig' id = 'fig2'>1</div></div>
                    <div style = "clear:left;"><div class="bar" id='abOdorWaterBar'>&emsp;</div><div class = 'fig' id = 'fig3'>1</div></div>
                    <div style = "clear:left;"><div class="bar" id='floatObBar'>&emsp;</div><div class = 'fig' id = 'fig4'>1</div></div>
                </div>

                <div style="margin-top:59px;" id='airIssuesBars'>
                    <div style = "clear:left;"><div class="bar" id='abnormalColorAir'>&emsp;</div><div class = 'fig' id = 'fig5'>1</div></div>
                    <div style = "clear:left;"><div class="bar" id='lowVisBar'>&emsp;</div><div class = 'fig' id = 'fig6'>1</div></div>                    
                    <div style = "clear:left;"><div class="bar" id='abOdorBar'>&emsp;</div><div class = 'fig' id = 'fig7'>1</div></div>
                    <div style = "clear:left;"><div class="bar" id='uncomfBar'>&emsp;</div><div class = 'fig' id = 'fig8'>1</div></div>
                </div>
                <div style="margin-top:59px" id='solidWasteIssuesBars'>
                    <div style = "clear:left;"><div class="bar" id='abOdorWasteBar'>&emsp;</div><div class = 'fig' id = 'fig9'>1</div></div>
                </div>
            </div>
                      
        </div>
        <div style="width: 200px; margin-bottom: 25px; margin-top: 20px" id='Actions'>
            <div style="float:left; margin-right: 10px; margin-left: 10px;">Write Review</div>
            <div style="float:left">More Review</div>
        </div>
    <div>Abnormal color</div>
    <form>
        <input type="number" id="formValueId1"/>
        <input type="submit" onclick="adjustBar(1)"/>
    </form>
    <div>Turbid</div>
    <form>
        <input type="number" id="formValueId2"/>
        <input type="submit" onclick="adjustBar(2)"/>
    </form>
    <div>Abnormal Odor</div>
    <form>
        <input type="number" id="formValueId3"/>
        <input type="submit" onclick="adjustBar(3)"/>
    </form>
    <div>Floating Objects</div>
    <form>
        <input type="number" id="formValueId4"/>
        <input type="submit" onclick="adjustBar(4)"/>
    </form>
    <div>Abnormal Color</div>
    <form>
        <input type="number" id="formValueId5"/>
        <input type="submit" onclick="adjustBar(5)"/>
    </form>
    <div>Low Visiblity</div>
    <form>
        <input type="number" id="formValueId6"/>
        <input type="submit" onclick="adjustBar(6)"/>
    </form>
    <div>Abnormal Odor</div>
    <form>
            <input type="number" id="formValueId7"/>
            <input type="submit" onclick="adjustBar(7)"/>
    </form>
    <div>Uncomfortable Feeling</div>
    <form>
            <input type="number" id="formValueId8"/>
            <input type="submit" onclick="adjustBar(8)"/>
    </form>
    <div>Abnormal Odor</div>
    <form>
            <input type="number" id="formValueId9"/>
            <input type="submit" onclick="adjustBar(9)"/>
    </form>       
    </div>        
    <a style="background-color:rgba(236, 236, 236, 0.979); box-shadow: 3px 3px 3px #888888;" href="#" id="toggleReview" class="btn btn-sm">
        <span id ="toggleIcon" style="color:black" class="glyphicon glyphicon-triangle-left"></span>
    </a>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>    
    <script>
        var barValArray = [1, 1, 1, 1, 1, 1, 1, 1, 1];
        var barSizeArray = [100, 100, 100, 100, 100, 100, 100, 100, 100];
        var barNameArray = ['abColBar', 'turbidBar', 'abOdorWaterBar', 'floatObBar', 'abnormalColorAir', 'lowVisBar', 'abOdorBar', 'uncomfBar', 'abOdorWasteBar'];

        function adjustBar(barNum){
            if(barNum < 0 || barNum > 9){
                return;
            }
            var formValueId = 'formValueId' + barNum;
            var input = document.getElementById(formValueId).value;
            if(input < 0) input = 0;

            barValArray[barNum - 1] = input;
            //alert(barValArray);            
            setBarSizes();
            //alert(barSizeArray);
        }

        function setBarSizes(){
            var largestIndex = 0;
            for(i = 0; i < barValArray.length; i++){
                if(barValArray[largestIndex] < barValArray[i]){
                    largestIndex = i;
                }
            }
            for(i = 0; i < barSizeArray.length; i++){
                var size = barValArray[i]/barValArray[largestIndex] * 100;
                if(size > 100) size = 150;
                barSizeArray[i] = size;
            }         
            //alert(barSizeArray);
            for(i = 0; i < barNameArray.length; i++){
                //alert(i);
                var hashtag = '#' + barNameArray[i];
                var figure = '#fig' + (i + 1);
                //alert(barSizeArray[i]);
                //alert(hashtag);
                $(hashtag).width(barSizeArray[i]);
                var displayValue = barValArray[i];
                if(displayValue > 999999999){
                    displayValue = displayValue/1000000000 + " B";
                }
                if(displayValue > 999999){
                    displayValue = displayValue/1000000 + " M";
                }                
                else if(displayValue > 999){
                    displayValue = displayValue/1000 + " k";
                }

                //alert("<div class = 'fig' id = 'fig" + (i + 1) + "'>" + barValArray[i] + "</div>");
                $(figure).replaceWith("<div class = 'fig' id = 'fig" + (i + 1) + "'>" + displayValue + "</div>");   
            }
            
        }

        $(function() {
            $("form").submit(function() { return false; });
        });


        $("#closeButton").click(function(event){
            $("#dataBox").fadeOut(200);

        });
        $("#toggleReview").click(function(){
            $('#dataBox').toggle(300);
            $('#toggleIcon').toggleClass("glyphicon glyphicon-triangle-left glyphicon glyphicon-triangle-right");
        });

        $(function () {
            $('[data-toggle="popover"]').popover()
        })
        //document.getElementById('abColBar').style.width = "50px";
        //document.getElementById('turbidBar').style.width = "50px";

        //var barWidth = sum / 10;
        

                //$('#bar').width(barWidth);
                //$('#value').replaceWith("<div id='value'>" + sum + "</div>");    

    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyARO_GKPZGUuXd515ZRpkxG2rDyXey0V5c&callback=initMap"></script>

    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  </body>
</html>